// Generated by CoffeeScript 1.7.1

/*
 * * tiler
 * * https://github.com/brewster1134/tiler
 * *
 * * Copyright (c) 2014 Ryan Brewster
 * * Licensed under the MIT license.
 */

(function() {
  (function(root, factory) {
    if (typeof define === 'function' && define.amd) {
      return define(['jquery'], function($) {
        return factory($);
      });
    } else {
      return window.Tiler = factory($);
    }
  })(this, function($) {
    var Tiler;
    return Tiler = (function() {
      function Tiler(options) {
        this.grid = {};
        this.options = $.extend({}, {
          tileSelector: '.tiler'
        }, options);
      }

      Tiler.prototype.buildGrid = function() {
        var $tiles, _this;
        _this = this;
        $tiles = $('.tiler');
        $tiles.each(function() {
          var col, coords, row, _base, _ref;
          row = null;
          col = null;
          if (coords = $(this).data('tiler-coords')) {
            coords = $.map(coords.split(','), function(val) {
              return parseInt(val);
            });
            row = coords[0];
            col = coords[1];
          } else {
            row = Object.keys(_this.grid).length;
            col = ((_ref = Object.keys(_this.grid[row] || {})) != null ? _ref.length : void 0) || 0;
          }
          (_base = _this.grid)[row] || (_base[row] = {});
          return _this.grid[row][col] = $(this);
        });
        return this.grid;
      };

      return Tiler;

    })();
  });

}).call(this);
